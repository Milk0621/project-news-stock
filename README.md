# News Stock Project

## 📌 프로젝트 개요
**목적**: 금융 뉴스를 기반으로 **시장 심리(감성 분석)** 와 **KOSPI 지수 예측(LSTM 모델)** 을 각각 수행하고,
두 결과를 함께 시각화하여 투자자에게 인사이트 제공

**특징**:
- 뉴스 감성 분석: **KorFinBERT** 모델을 활용해 금융 뉴스 맥락 이해 강화
- KOSPI 예측: **LSTM 시계열 모델**을 통해 과거 데이터 기반 다음 날 종가 예측
- 날짜별 분석 페이지 제공 → 뉴스 분위기와 종가를 한눈에 비교
- WebSocket 기반 실시간 알림 및 채팅 기능 구현

---

## ⚙️ 주요 기능
### **1. 뉴스 수집 및 감성 분석 처리**
- **Selenium +** **BeautifulSoup**으로 금융 뉴스 실시간 크롤링
- **1차 시도: LSTM 기반 감성 분석 →** 한계 발생
    - 복합 문장 해석 부족 
    → “실적 호조에도 불구하고 하락세”처럼 모순된 표현을 정확히 판단하지 못함.
    - 금융 용어 처리 미흡 
    → “공매도”, “상한가”, “실적 발표” 등 도메인 특화 어휘 처리 미흡
- **개선: KorFinBERT 모델 적용**
    - 한국 금융 뉴스에 특화 BERT 기반 모델
    - PyTorch 기반 → **TensorFlow 환경에 맞게 변환 후 적용**
    - 금융 문맥 해석 정확도 크게 향상

### **2. 날짜별 분석 페이지**
- 하루 동안 수집된 뉴스의 **긍정 뉴스의 비율(%)** 계산
- **해당 날짜의 KOSPI 종가와 함께 시각화**
- 사용자가 **시장 심리와 실제 주가 간의 상관관계**를 직관적으로 확인 가능

### **3. KOSPI 지수 예측 (LSTM 시계열 모델)**

- 입력 데이터: 과거 KOSPI 지수 데이터 (감성 점수는 미사용)
- **TensorFlow/Keras 기반 LSTM 모델** 활용
- 일정 기간 데이터를 학습 → **다음 날 종가 예측**
- 성능 평가 및 하이퍼파라미터 튜닝 진행

### 4. 실시간 데이터 처리 구조

- **Python (백엔드)**
    - 키움증권 REST API → 실시간 주가 수신
    - 데이터 DB 저장 → 분석/예측용으로 활용
- **JavaScript (프론트엔드)**
    - 브라우저에서 키움 API 직접 호출 → **실시간 차트 렌더링**
    - 데이터 저장과 UI 반영을 분리하여 성능 + 실시간성 동시 확보

### 5. WebSocket 실시간 알림 & 채팅

- Python(WebSocket 서버) ↔ JavaScript(클라이언트) 양방향 통신
- JSON 기반 메시지 (`type` 필드로 알림/채팅 구분)
- 예측 알림: 하루 1회만 전송 (DB flag 컬럼으로 중복 방지)
- 모든 메시지는 **Broadcast** 되어 연결된 모든 클라이언트에 전달

---

## 🛠 기술 스택
- **백엔드**: Python (Flask API, WebSocket 서버), JSP 연동
- **프론트엔드**: HTML, CSS, JavaScript (실시간 차트 & UI)
- **머신러닝 모델**:
    - LSTM (TensorFlow/Keras) – KOSPI 예측
    - KorFinBERT (PyTorch → TensorFlow 변환) – 뉴스 감성 분석
- **데이터 수집**: Selenium, BeautifulSoup (금융 뉴스 크롤링)
- **데이터베이스**: MySQL (뉴스, 주가, 예측 결과 저장)
- **실시간 처리**: WebSocket (예측 알림 & 채팅)
- **외부 연동**: 키움증권 REST API (실시간 주가 수신)

---

## ✨ 성과
- **KorFinBERT 도입**으로 금융 뉴스 감성 분석 정확도 크게 개선
- 뉴스 감성 결과 + KOSPI 예측 결과를 **한 플랫폼에서 시각화**
- WebSocket을 통한 **실시간 예측 알림 & 채팅 기능** 구현
- Python(데이터 처리/예측) ↔ JavaScript(UI) 역할 분리를 통해 **효율적 실시간 처리 구조** 확보

---

## 🚧 어려움 & 해결 (Troubleshooting)
1. **뉴스 감성 분석 모델 선택**
    - 문제: LSTM 기반 모델이 금융 문맥 해석에 한계
    - 해결: **KorFinBERT** 도입 (PyTorch → TensorFlow 변환 후 적용)
2. **실시간 데이터 처리**
    - 문제: 실시간 차트 반영 시 서버 부하 및 속도 문제
    - 해결: **Python은 수집·저장, JS는 실시간 UI 반영**으로 역할 분리
3. **WebSocket 중복 알림**
    - 문제: 예측 알림이 여러 번 전송되는 오류 발생
    - 해결: DB에 `flag` 컬럼 추가 → 하루 1회 전송으로 제어

---

## 🌟 프로젝트 의의
- **도메인 특화 모델(KorFinBERT)** 을 실제 서비스에 적용한 경험
- **머신러닝(LSTM) + 자연어 처리(BERT)** 를 결합한 금융 데이터 분석 파이프라인 구축
- 실시간 REST API, WebSocket, DB 연동을 통한 **엔드투엔드 데이터 흐름 구현 경험**
- 단순 예측을 넘어 **시장 심리와 주가지수 관계를 분석·시각화**함으로써 의사결정 지원 기능 제공

---

## 📌 향후 개선 방향

- 예측 정확도 향상을 위한 외부 변수(뉴스 감성 점수 등) 추가 실험
- 사용자 맞춤형 뉴스 추천 기능 연계
- 종목 기반 예측으로 확장
